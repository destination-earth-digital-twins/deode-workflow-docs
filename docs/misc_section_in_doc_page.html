<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Miscellaneous Documentation &mdash; Deode Prototype Docs  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="deode package" href="deode.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Deode Prototype Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme_link.html">README</a><ul>
<li class="toctree-l2"><a class="reference internal" href="readme_link.html#about">About</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme_link.html#system-requirements">System Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme_link.html#optional-system-requirements">Optional System Requirements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="readme_link.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme_link.html#developer-mode-installation">Developer Mode Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="readme_link.html#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme_link.html#the-configuration-file">The Configuration File</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_link.html#command-line-options">Command line options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="readme_link.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme_link.html#example-running-a-ecflow-suite-from-server-ecflow-gen-user-001-on-atos">Example running a ecflow suite from server ecflow-gen-${USER}-001 on atos</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_link.html#example-using-poetry-and-run-the-forecast-task-from-hpc-login-command-line">Example using poetry and run the forecast task from hpc-login command line</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development_guidelines_link.html">Development Guidelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="development_guidelines_link.html#best-practices">Best practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="development_guidelines_link.html#checklist-for-authors">Checklist for authors</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_guidelines_link.html#checklist-for-reviewers">Checklist for reviewers</a></li>
<li class="toctree-l3"><a class="reference internal" href="development_guidelines_link.html#checklist-for-assignees">Checklist for assignees</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="development_guidelines_link.html#local-testing">Local testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="development_guidelines_link.html#branches">Branches</a><ul>
<li class="toctree-l3"><a class="reference internal" href="development_guidelines_link.html#forks">Forks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="development_guidelines_link.html#run-on-lumi">Run on LUMI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deode.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="deode.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.argparse_wrapper">deode.argparse_wrapper module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.argparse_wrapper.get_parsed_args"><code class="docutils literal notranslate"><span class="pre">get_parsed_args()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.commands_functions">deode.commands_functions module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.commands_functions.doc_config"><code class="docutils literal notranslate"><span class="pre">doc_config()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.commands_functions.run_task"><code class="docutils literal notranslate"><span class="pre">run_task()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.commands_functions.set_deode_home"><code class="docutils literal notranslate"><span class="pre">set_deode_home()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.commands_functions.show_config"><code class="docutils literal notranslate"><span class="pre">show_config()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.commands_functions.show_namelist"><code class="docutils literal notranslate"><span class="pre">show_namelist()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.commands_functions.start_suite"><code class="docutils literal notranslate"><span class="pre">start_suite()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.config_doc">deode.config_doc module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.config_doc.DocConfig"><code class="docutils literal notranslate"><span class="pre">DocConfig</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_doc.DocConfig.expand_config"><code class="docutils literal notranslate"><span class="pre">DocConfig.expand_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_doc.DocConfig.expand_schema"><code class="docutils literal notranslate"><span class="pre">DocConfig.expand_schema()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_doc.DocConfig.get_config"><code class="docutils literal notranslate"><span class="pre">DocConfig.get_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_doc.DocConfig.get_schema"><code class="docutils literal notranslate"><span class="pre">DocConfig.get_schema()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_doc.DocConfig.merge"><code class="docutils literal notranslate"><span class="pre">DocConfig.merge()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_doc.DocConfig.print_doc"><code class="docutils literal notranslate"><span class="pre">DocConfig.print_doc()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_doc.DocConfig.print_header"><code class="docutils literal notranslate"><span class="pre">DocConfig.print_header()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_doc.DocConfig.schema_props"><code class="docutils literal notranslate"><span class="pre">DocConfig.schema_props()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.config_parser">deode.config_parser module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.config_parser.BasicConfig"><code class="docutils literal notranslate"><span class="pre">BasicConfig</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_parser.BasicConfig.copy"><code class="docutils literal notranslate"><span class="pre">BasicConfig.copy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_parser.BasicConfig.dict"><code class="docutils literal notranslate"><span class="pre">BasicConfig.dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_parser.BasicConfig.dumps"><code class="docutils literal notranslate"><span class="pre">BasicConfig.dumps()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_parser.BasicConfig.get_value"><code class="docutils literal notranslate"><span class="pre">BasicConfig.get_value()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_parser.BasicConfig.items"><code class="docutils literal notranslate"><span class="pre">BasicConfig.items()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.config_parser.ConfigFileValidationError"><code class="docutils literal notranslate"><span class="pre">ConfigFileValidationError</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.config_parser.JsonSchema"><code class="docutils literal notranslate"><span class="pre">JsonSchema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.config_parser.ParsedConfig"><code class="docutils literal notranslate"><span class="pre">ParsedConfig</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_parser.ParsedConfig.copy"><code class="docutils literal notranslate"><span class="pre">ParsedConfig.copy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_parser.ParsedConfig.from_file"><code class="docutils literal notranslate"><span class="pre">ParsedConfig.from_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.config_parser.ParsedConfig.parse_obj"><code class="docutils literal notranslate"><span class="pre">ParsedConfig.parse_obj()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.config_parser.get_default_config_path"><code class="docutils literal notranslate"><span class="pre">get_default_config_path()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.config_parser.read_raw_config_file"><code class="docutils literal notranslate"><span class="pre">read_raw_config_file()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.datetime_utils">deode.datetime_utils module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.datetime_utils.as_datetime"><code class="docutils literal notranslate"><span class="pre">as_datetime()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.datetime_utils.as_timedelta"><code class="docutils literal notranslate"><span class="pre">as_timedelta()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.datetime_utils.cycle_offset"><code class="docutils literal notranslate"><span class="pre">cycle_offset()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.datetime_utils.dt2str"><code class="docutils literal notranslate"><span class="pre">dt2str()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.datetime_utils.expand_output_settings"><code class="docutils literal notranslate"><span class="pre">expand_output_settings()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.datetime_utils.oi2dt_list"><code class="docutils literal notranslate"><span class="pre">oi2dt_list()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.derived_variables">deode.derived_variables module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.derived_variables.derived_variables"><code class="docutils literal notranslate"><span class="pre">derived_variables()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.fullpos">deode.fullpos module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.fullpos.Fullpos"><code class="docutils literal notranslate"><span class="pre">Fullpos</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.fullpos.Fullpos.construct"><code class="docutils literal notranslate"><span class="pre">Fullpos.construct()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.fullpos.Fullpos.expand"><code class="docutils literal notranslate"><span class="pre">Fullpos.expand()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.fullpos.Fullpos.load"><code class="docutils literal notranslate"><span class="pre">Fullpos.load()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.geo_utils">deode.geo_utils module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.geo_utils.Projection"><code class="docutils literal notranslate"><span class="pre">Projection</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.geo_utils.Projection.check_key"><code class="docutils literal notranslate"><span class="pre">Projection.check_key()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.geo_utils.Projection.get_domain_properties"><code class="docutils literal notranslate"><span class="pre">Projection.get_domain_properties()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.geo_utils.Projstring"><code class="docutils literal notranslate"><span class="pre">Projstring</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.geo_utils.Projstring.get_projstring"><code class="docutils literal notranslate"><span class="pre">Projstring.get_projstring()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.initial_conditions">deode.initial_conditions module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.initial_conditions.InitialConditions"><code class="docutils literal notranslate"><span class="pre">InitialConditions</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.initial_conditions.InitialConditions.find_initial_files"><code class="docutils literal notranslate"><span class="pre">InitialConditions.find_initial_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.initial_conditions.InitialConditions.nosuccess"><code class="docutils literal notranslate"><span class="pre">InitialConditions.nosuccess()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.logs">deode.logs module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.logs.CustomFormatter"><code class="docutils literal notranslate"><span class="pre">CustomFormatter</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.logs.CustomFormatter.FORMATS"><code class="docutils literal notranslate"><span class="pre">CustomFormatter.FORMATS</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.logs.CustomFormatter.format"><code class="docutils literal notranslate"><span class="pre">CustomFormatter.format()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.logs.LogColor"><code class="docutils literal notranslate"><span class="pre">LogColor</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.logs.LogColor.cyan"><code class="docutils literal notranslate"><span class="pre">LogColor.cyan</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.logs.LogColor.green"><code class="docutils literal notranslate"><span class="pre">LogColor.green</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.logs.LogColor.red"><code class="docutils literal notranslate"><span class="pre">LogColor.red</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.logs.LogColor.reset"><code class="docutils literal notranslate"><span class="pre">LogColor.reset</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.logs.LogColor.yellow"><code class="docutils literal notranslate"><span class="pre">LogColor.yellow</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.logs.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.logs.get_logger_from_config"><code class="docutils literal notranslate"><span class="pre">get_logger_from_config()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.main">deode.main module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.main.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.namelist">deode.namelist module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.namelist.InvalidNamelistKindError"><code class="docutils literal notranslate"><span class="pre">InvalidNamelistKindError</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.namelist.InvalidNamelistTargetError"><code class="docutils literal notranslate"><span class="pre">InvalidNamelistTargetError</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.namelist.NamelistGenerator"><code class="docutils literal notranslate"><span class="pre">NamelistGenerator</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.namelist.NamelistGenerator.assemble_namelist"><code class="docutils literal notranslate"><span class="pre">NamelistGenerator.assemble_namelist()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.namelist.NamelistGenerator.generate_namelist"><code class="docutils literal notranslate"><span class="pre">NamelistGenerator.generate_namelist()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.namelist.NamelistGenerator.load"><code class="docutils literal notranslate"><span class="pre">NamelistGenerator.load()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.namelist.NamelistGenerator.load_user_namelist"><code class="docutils literal notranslate"><span class="pre">NamelistGenerator.load_user_namelist()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.namelist.NamelistGenerator.update"><code class="docutils literal notranslate"><span class="pre">NamelistGenerator.update()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.namelist.NamelistGenerator.write_namelist"><code class="docutils literal notranslate"><span class="pre">NamelistGenerator.write_namelist()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.namelist.find_num"><code class="docutils literal notranslate"><span class="pre">find_num()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.namelist.flatten_list"><code class="docutils literal notranslate"><span class="pre">flatten_list()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.os_utils">deode.os_utils module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.os_utils.Search"><code class="docutils literal notranslate"><span class="pre">Search</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.os_utils.Search.find_files"><code class="docutils literal notranslate"><span class="pre">Search.find_files()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.scheduler">deode.scheduler module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.scheduler.EcflowClient"><code class="docutils literal notranslate"><span class="pre">EcflowClient</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.scheduler.EcflowClient.at_time"><code class="docutils literal notranslate"><span class="pre">EcflowClient.at_time()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.scheduler.EcflowClient.signal_handler"><code class="docutils literal notranslate"><span class="pre">EcflowClient.signal_handler()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.scheduler.EcflowLogServer"><code class="docutils literal notranslate"><span class="pre">EcflowLogServer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.scheduler.EcflowServer"><code class="docutils literal notranslate"><span class="pre">EcflowServer</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.scheduler.EcflowServer.begin_suite"><code class="docutils literal notranslate"><span class="pre">EcflowServer.begin_suite()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.scheduler.EcflowServer.force_aborted"><code class="docutils literal notranslate"><span class="pre">EcflowServer.force_aborted()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.scheduler.EcflowServer.force_complete"><code class="docutils literal notranslate"><span class="pre">EcflowServer.force_complete()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.scheduler.EcflowServer.replace"><code class="docutils literal notranslate"><span class="pre">EcflowServer.replace()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.scheduler.EcflowServer.start_server"><code class="docutils literal notranslate"><span class="pre">EcflowServer.start_server()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.scheduler.EcflowTask"><code class="docutils literal notranslate"><span class="pre">EcflowTask</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.scheduler.Server"><code class="docutils literal notranslate"><span class="pre">Server</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.scheduler.Server.begin_suite"><code class="docutils literal notranslate"><span class="pre">Server.begin_suite()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.scheduler.Server.replace"><code class="docutils literal notranslate"><span class="pre">Server.replace()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.scheduler.Server.start_server"><code class="docutils literal notranslate"><span class="pre">Server.start_server()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.scheduler.Server.start_suite"><code class="docutils literal notranslate"><span class="pre">Server.start_suite()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.submission">deode.submission module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.submission.NoSchedulerSubmission"><code class="docutils literal notranslate"><span class="pre">NoSchedulerSubmission</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.submission.NoSchedulerSubmission.submit"><code class="docutils literal notranslate"><span class="pre">NoSchedulerSubmission.submit()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.submission.ProcessorLayout"><code class="docutils literal notranslate"><span class="pre">ProcessorLayout</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.submission.ProcessorLayout.get_proc_dict"><code class="docutils literal notranslate"><span class="pre">ProcessorLayout.get_proc_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.submission.ProcessorLayout.get_wrapper"><code class="docutils literal notranslate"><span class="pre">ProcessorLayout.get_wrapper()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.submission.TaskSettings"><code class="docutils literal notranslate"><span class="pre">TaskSettings</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.submission.TaskSettings.get_settings"><code class="docutils literal notranslate"><span class="pre">TaskSettings.get_settings()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.submission.TaskSettings.get_task_settings"><code class="docutils literal notranslate"><span class="pre">TaskSettings.get_task_settings()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.submission.TaskSettings.parse_job"><code class="docutils literal notranslate"><span class="pre">TaskSettings.parse_job()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.submission.TaskSettings.parse_submission_defs"><code class="docutils literal notranslate"><span class="pre">TaskSettings.parse_submission_defs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.submission.TaskSettings.recursive_items"><code class="docutils literal notranslate"><span class="pre">TaskSettings.recursive_items()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.submission.TaskSettings.update_task_setting"><code class="docutils literal notranslate"><span class="pre">TaskSettings.update_task_setting()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.suites">deode.suites module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.suites.EcflowNode"><code class="docutils literal notranslate"><span class="pre">EcflowNode</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.suites.EcflowNodeContainer"><code class="docutils literal notranslate"><span class="pre">EcflowNodeContainer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.suites.EcflowSuite"><code class="docutils literal notranslate"><span class="pre">EcflowSuite</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.suites.EcflowSuite.save_as_defs"><code class="docutils literal notranslate"><span class="pre">EcflowSuite.save_as_defs()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.suites.EcflowSuiteFamily"><code class="docutils literal notranslate"><span class="pre">EcflowSuiteFamily</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.suites.EcflowSuiteTask"><code class="docutils literal notranslate"><span class="pre">EcflowSuiteTask</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.suites.EcflowSuiteTrigger"><code class="docutils literal notranslate"><span class="pre">EcflowSuiteTrigger</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.suites.EcflowSuiteTriggers"><code class="docutils literal notranslate"><span class="pre">EcflowSuiteTriggers</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.suites.EcflowSuiteTriggers.add_triggers"><code class="docutils literal notranslate"><span class="pre">EcflowSuiteTriggers.add_triggers()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.suites.EcflowSuiteTriggers.create_string"><code class="docutils literal notranslate"><span class="pre">EcflowSuiteTriggers.create_string()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.suites.SuiteDefinition"><code class="docutils literal notranslate"><span class="pre">SuiteDefinition</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.suites.SuiteDefinition.save_as_defs"><code class="docutils literal notranslate"><span class="pre">SuiteDefinition.save_as_defs()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deode.html#module-deode.toolbox">deode.toolbox module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.toolbox.ArchiveError"><code class="docutils literal notranslate"><span class="pre">ArchiveError</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.toolbox.ArchiveProvider"><code class="docutils literal notranslate"><span class="pre">ArchiveProvider</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.ArchiveProvider.create_resource"><code class="docutils literal notranslate"><span class="pre">ArchiveProvider.create_resource()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.toolbox.ECFS"><code class="docutils literal notranslate"><span class="pre">ECFS</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.ECFS.create_resource"><code class="docutils literal notranslate"><span class="pre">ECFS.create_resource()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.toolbox.FileManager"><code class="docutils literal notranslate"><span class="pre">FileManager</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.FileManager.get_input"><code class="docutils literal notranslate"><span class="pre">FileManager.get_input()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.FileManager.get_output"><code class="docutils literal notranslate"><span class="pre">FileManager.get_output()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.FileManager.input"><code class="docutils literal notranslate"><span class="pre">FileManager.input()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.FileManager.output"><code class="docutils literal notranslate"><span class="pre">FileManager.output()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.FileManager.set_resources_from_dict"><code class="docutils literal notranslate"><span class="pre">FileManager.set_resources_from_dict()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.toolbox.LocalFileOnDisk"><code class="docutils literal notranslate"><span class="pre">LocalFileOnDisk</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.toolbox.LocalFileSystemCopy"><code class="docutils literal notranslate"><span class="pre">LocalFileSystemCopy</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.LocalFileSystemCopy.create_resource"><code class="docutils literal notranslate"><span class="pre">LocalFileSystemCopy.create_resource()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.toolbox.LocalFileSystemMove"><code class="docutils literal notranslate"><span class="pre">LocalFileSystemMove</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.LocalFileSystemMove.create_resource"><code class="docutils literal notranslate"><span class="pre">LocalFileSystemMove.create_resource()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.toolbox.LocalFileSystemSymlink"><code class="docutils literal notranslate"><span class="pre">LocalFileSystemSymlink</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.LocalFileSystemSymlink.create_resource"><code class="docutils literal notranslate"><span class="pre">LocalFileSystemSymlink.create_resource()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.toolbox.Platform"><code class="docutils literal notranslate"><span class="pre">Platform</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.Platform.get_gen_macros"><code class="docutils literal notranslate"><span class="pre">Platform.get_gen_macros()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.Platform.get_macros"><code class="docutils literal notranslate"><span class="pre">Platform.get_macros()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.Platform.get_os_macros"><code class="docutils literal notranslate"><span class="pre">Platform.get_os_macros()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.Platform.get_platform"><code class="docutils literal notranslate"><span class="pre">Platform.get_platform()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.Platform.get_platform_value"><code class="docutils literal notranslate"><span class="pre">Platform.get_platform_value()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.Platform.get_provider"><code class="docutils literal notranslate"><span class="pre">Platform.get_provider()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.Platform.get_system_macros"><code class="docutils literal notranslate"><span class="pre">Platform.get_system_macros()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.Platform.get_system_value"><code class="docutils literal notranslate"><span class="pre">Platform.get_system_value()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.Platform.get_value"><code class="docutils literal notranslate"><span class="pre">Platform.get_value()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.Platform.sub_value"><code class="docutils literal notranslate"><span class="pre">Platform.sub_value()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.Platform.substitute"><code class="docutils literal notranslate"><span class="pre">Platform.substitute()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.toolbox.Provider"><code class="docutils literal notranslate"><span class="pre">Provider</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="deode.html#deode.toolbox.Provider.create_resource"><code class="docutils literal notranslate"><span class="pre">Provider.create_resource()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.toolbox.ProviderError"><code class="docutils literal notranslate"><span class="pre">ProviderError</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="deode.html#deode.toolbox.Resource"><code class="docutils literal notranslate"><span class="pre">Resource</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Misc</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-deode-config-file">The DEODE config file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generalsectionmodel">GeneralSectionModel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generalsectionmodel-outputsettings">GeneralSectionModel &gt; OutputSettings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generalsectionmodel-times">GeneralSectionModel &gt; Times</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#filetemplates">FileTemplates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#macrosection">MacroSection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verticallevels">VerticalLevels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#domainsection">DomainSection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#system">System</a></li>
<li class="toctree-l3"><a class="reference internal" href="#platform">Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="#troika">Troika</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#adding-a-new-task">Adding a New Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="#namelist-handling-in-deode">Namelist handling in deode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#internal-usage">Internal usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-a-specific-namelist-from-command-line">Get a specific namelist from command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-your-own-namelist">Add your own namelist</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configure-selection-of-fields-from-fullpos">Configure selection of fields from fullpos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fullpos-config-file">The fullpos config file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#namfpc-settings">NAMFPC settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#selection">Selection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Deode Prototype Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Miscellaneous Documentation</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="miscellaneous-documentation">
<h1>Miscellaneous Documentation<a class="headerlink" href="#miscellaneous-documentation" title="Permalink to this heading"></a></h1>
<section id="the-deode-config-file">
<h2>The DEODE config file<a class="headerlink" href="#the-deode-config-file" title="Permalink to this heading"></a></h2>
<p>This was automatically generated running <code class="docutils literal notranslate"><span class="pre">deode</span> <span class="pre">doc</span> <span class="pre">config</span></code> on 2023-06-21T19:39:56.</p>
<section id="generalsectionmodel">
<h3>GeneralSectionModel<a class="headerlink" href="#generalsectionmodel" title="Permalink to this heading"></a></h3>
<p>Model for the ‘general’ section.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Options</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>case</p></td>
<td><p>Experiment name</p></td>
<td><p>harmonie_arome_CY46h1</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>cnmexp</p></td>
<td><p>Experiment short name</p></td>
<td><p>DEOD</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>realization</p></td>
<td><p>Placeholder for future ensemble or similar need</p></td>
<td><p>-1</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>tstep</p></td>
<td><p>Model time step</p></td>
<td><p>75</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-even"><td><p>loglevel</p></td>
<td><p>Logger output level</p></td>
<td><p>info</p></td>
<td><p>critical, error, debug, info, warning, CRITICAL, ERROR, DEBUG, INFO, WARNING</p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>csc</p></td>
<td><p>CSC</p></td>
<td><p>HARMONIE-AROME</p></td>
<td><p>AROME, ALARO, HARMONIE-AROME</p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>cycle</p></td>
<td><p>IAL cycle</p></td>
<td><p>CY46h1</p></td>
<td><p>CY48t3, CY46t1, CY46h1</p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>surfex</p></td>
<td><p>SURFEX switch</p></td>
<td><p>True</p></td>
<td><p></p></td>
<td><p>boolean</p></td>
</tr>
<tr class="row-even"><td><p>bdint</p></td>
<td><p>Boundary interval</p></td>
<td><p>PT3H</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>bdshift</p></td>
<td><p>Shift of boundary initial time. E.g. ‘-PT3H’ would mean use 3H old boundaries</p></td>
<td><p>PT0H</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>bdcycle</p></td>
<td><p>Boundary model cycle interval</p></td>
<td><p>PT12H</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>bdmax</p></td>
<td><p>Max number of parallel boundary interpolation tasks</p></td>
<td><p>12</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-even"><td><p>forecast_range</p></td>
<td><p>Forecast range</p></td>
<td><p>PT12H</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>keep_workdirs</p></td>
<td><p>Do not remove working directories</p></td>
<td><p>True</p></td>
<td><p></p></td>
<td><p>boolean</p></td>
</tr>
<tr class="row-even"><td><p>create_static_data</p></td>
<td><p>Activate the generation of PGD and monthly climate files in the suite</p></td>
<td><p>True</p></td>
<td><p></p></td>
<td><p>boolean</p></td>
</tr>
<tr class="row-odd"><td><p>accept_static_namelists</p></td>
<td><p>Allow usage of static namelists as input for the tasks. The namelist should be located in the directory specified by platform.namelists and named with the convention namelist_{kind}_{task} where kind could be surfex or master and task forecast/pgd or similar. For the extraction of namelist see <a class="reference internal" href="#../docs/namelists.md"><span class="xref myst">namelists.md</span></a>.</p></td>
<td><p>False</p></td>
<td><p></p></td>
<td><p>boolean</p></td>
</tr>
<tr class="row-even"><td><p>nproma</p></td>
<td><p></p></td>
<td><p>-32</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<section id="generalsectionmodel-outputsettings">
<h4>GeneralSectionModel &gt; OutputSettings<a class="headerlink" href="#generalsectionmodel-outputsettings" title="Permalink to this heading"></a></h4>
<p>Output settings. Specified as duration for any of interval, endtime:interval, starttime:endtime:interval or a list of these options</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Options</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>history</p></td>
<td><p>Output list for history files</p></td>
<td><p>(‘PT1H:PT3H:PT1H’, ‘PT3H:PT6H:PT3H’, ‘PT6H’)</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>fullpos</p></td>
<td><p>Output list for fullpos files</p></td>
<td><p>PT24H:PT15M</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>surfex</p></td>
<td><p>Output list for surfex files</p></td>
<td><p>(‘PT3H:PT1H’, ‘PT9H:PT24H:PT3H’)</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="generalsectionmodel-times">
<h4>GeneralSectionModel &gt; Times<a class="headerlink" href="#generalsectionmodel-times" title="Permalink to this heading"></a></h4>
<p>Model for the ‘general.times’ section.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Options</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>basetime</p></td>
<td><p></p></td>
<td><p>2023-02-19T00:00:00Z</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>validtime</p></td>
<td><p></p></td>
<td><p>2023-02-19T00:00:00Z</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start</p></td>
<td><p>Start</p></td>
<td><p>2023-02-19T00:00:00Z</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>end</p></td>
<td><p>End</p></td>
<td><p>2023-02-19T03:00:00Z</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>cycle_length</p></td>
<td><p>Cycle length defined as duration</p></td>
<td><p>PT3H</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="filetemplates">
<h3>FileTemplates<a class="headerlink" href="#filetemplates" title="Permalink to this heading"></a></h3>
<p>Templates for file names</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Options</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>duration_grib</p></td>
<td><p></p></td>
<td><p>&#64;LLLH&#64;h&#64;LM&#64;m&#64;LS&#64;s</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>duration_fa</p></td>
<td><p>Macros for duration representation of FA files, note that this is given by the IAL code.</p></td>
<td><p>&#64;LLLH&#64;:&#64;LM&#64;:&#64;LS&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>history</p></td>
<td><p>Name template for history files</p></td>
<td><p>ICMSH&#64;CNMEXP&#64;+&#64;DURATION_FA&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>surfex</p></td>
<td><p>Name template for surfex history files</p></td>
<td><p>ICMSH&#64;CNMEXP&#64;+&#64;DURATION_FA&#64;.sfx</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>fullpos</p></td>
<td><p>Name template for fullpos files. Note that these are in GRIB2 by default.</p></td>
<td><p>GRIBPF&#64;CNMEXP&#64;&#64;DOMAIN&#64;+&#64;DURATION_FA&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
</tbody>
</table>
</section>
<section id="macrosection">
<h3>MacroSection<a class="headerlink" href="#macrosection" title="Permalink to this heading"></a></h3>
<p>Model for the ‘domain’ section.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Options</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>os_macros</p></td>
<td><p>Environment variables used as macros</p></td>
<td><p>(‘USER’, ‘HOME’, ‘PWD’)</p></td>
<td><p></p></td>
<td><p>array</p></td>
</tr>
<tr class="row-odd"><td><p>group_macros</p></td>
<td><p>Turns a full config section to a macro</p></td>
<td><p>(‘platform’, ‘system’)</p></td>
<td><p></p></td>
<td><p>array</p></td>
</tr>
<tr class="row-even"><td><p>gen_macros</p></td>
<td><p>Turns any string config to a macro, use a dict to rename an attribute.</p></td>
<td><p>(‘general.cnmexp’, ‘general.cycle’, ‘file_templates.duration_grib’, ‘file_templates.duration_fa’, {‘surfex_template’: ‘file_templates.surfex’}, {‘case’: ‘general.case’}, {‘domain’: ‘domain.name’}, {‘rrr’: ‘general.realization’})</p></td>
<td><p></p></td>
<td><p>array</p></td>
</tr>
</tbody>
</table>
</section>
<section id="verticallevels">
<h3>VerticalLevels<a class="headerlink" href="#verticallevels" title="Permalink to this heading"></a></h3>
<p>Options for vertical levels</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Options</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>nlev</p></td>
<td><p>Number of vertical full levels</p></td>
<td><p>65</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>ahalf</p></td>
<td><p>Level definition for the a coefficient of half levels</p></td>
<td><p>(0.0, 2000.0, 4000.21287319, 6002.09662113, 7911.25838577, 9633.01049417, 11169.37146237, 12522.57753978, 13695.00149653, 14689.11546998, 15507.49052823, 16154.69697732, 16632.12471208, 16940.1494996, 17082.34869816, 17065.28164099, 16898.18367797, 16592.58939571, 16161.90395878, 15620.9434055, 14985.46502362, 14271.70773051, 13495.95994372, 12674.1690991, 11821.60314859, 10952.5704262, 10080.20053763, 9216.28565403, 8371.17893039, 7553.74479607, 6771.35457397, 6029.92021691, 5333.95880836, 4686.68074804, 4090.09511346, 3545.1264511, 3051.73811264, 2609.05813936, 2215.50455766, 1868.90774223, 1566.6282106, 1305.66882073, 1081.85503306, 890.47596795, 727.74548529, 590.17748096, 474.5876798, 378.08857614, 298.07947335, 232.23312781, 178.48015386, 134.9920744, 100.16369201, 72.59529482, 51.07508967, 34.5621649, 22.17022046, 13.15225964, 6.8864131, 2.86306141, 0.67344356, 0.0, 0.0, 0.0, 0.0, 0.0)</p></td>
<td><p></p></td>
<td><p>array</p></td>
</tr>
<tr class="row-even"><td><p>bhalf</p></td>
<td><p>Level definition for the b coefficient of half levels</p></td>
<td><p>(0.0, 0.0, 0.0, 0.0, 0.00095468, 0.0038257, 0.00862327, 0.01535782, 0.02404046, 0.03468314, 0.04729839, 0.06195102, 0.07868187, 0.09744325, 0.11815586, 0.14071098, 0.16497348, 0.19078554, 0.21797086, 0.24633925, 0.27569119, 0.30582244, 0.33652825, 0.36760726, 0.39886479, 0.43011564, 0.46118624, 0.49191624, 0.52215946, 0.55178443, 0.58067442, 0.60872709, 0.63585388, 0.66197911, 0.68703898, 0.71098036, 0.73375964, 0.75534143, 0.77569737, 0.79480486, 0.81264598, 0.82920633, 0.84454, 0.85875505, 0.87191802, 0.88409276, 0.89534045, 0.90571965, 0.91528643, 0.92409452, 0.93219549, 0.93963895, 0.94647277, 0.95274328, 0.95849551, 0.9637734, 0.96862008, 0.97307803, 0.97718944, 0.9809964, 0.98454132, 0.98786727, 0.99102462, 0.9940651, 0.99703923, 1.0)</p></td>
<td><p></p></td>
<td><p>array</p></td>
</tr>
</tbody>
</table>
</section>
<section id="domainsection">
<h3>DomainSection<a class="headerlink" href="#domainsection" title="Permalink to this heading"></a></h3>
<p>Model for the ‘domain’ section.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Options</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>Name of your domain</p></td>
<td><p>DEMO_60x80_2500m</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>nimax</p></td>
<td><p>Number of grid points longitudinally</p></td>
<td><p>49</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-even"><td><p>njmax</p></td>
<td><p>Number of grid points latitudinally</p></td>
<td><p>69</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>xloncen</p></td>
<td><p>Domain center longitude</p></td>
<td><p>4.9</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-even"><td><p>xlatcen</p></td>
<td><p>Domain center latitude</p></td>
<td><p>51.967</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>xlon0</p></td>
<td><p>Reference longitude</p></td>
<td><p>0.0</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-even"><td><p>xlat0</p></td>
<td><p>Reference latitude</p></td>
<td><p>52.5</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>xbeta</p></td>
<td><p></p></td>
<td><p>0.0</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>xdx</p></td>
<td><p>Domain longitudinal length in meters</p></td>
<td><p>2500.0</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>xdy</p></td>
<td><p>Domain latiudinal length in meters</p></td>
<td><p>2500.0</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-even"><td><p>ilone</p></td>
<td><p>Longitudinal extension zone</p></td>
<td><p>11</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>ilate</p></td>
<td><p>Latitudinal extension zone</p></td>
<td><p>11</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-even"><td><p>nbzong</p></td>
<td><p>Latitudinal coupling zone width</p></td>
<td><p>8</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>nbzonl</p></td>
<td><p>Longitudinal coupling zone width</p></td>
<td><p>8</p></td>
<td><p></p></td>
<td><p>number</p></td>
</tr>
<tr class="row-even"><td><p>gridtype</p></td>
<td><p>Select truncation type</p></td>
<td><p>linear</p></td>
<td><p>linear, quadratic, cubic, custom</p></td>
<td><p>string</p></td>
</tr>
</tbody>
</table>
</section>
<section id="system">
<h3>System<a class="headerlink" href="#system" title="Permalink to this heading"></a></h3>
<p>DEODE system specific path settings</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Options</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>wrk</p></td>
<td><p>Location of date specific working directory</p></td>
<td><p>&#64;SCRATCH&#64;/deode/&#64;CASE&#64;/&#64;YYYY&#64;&#64;MM&#64;&#64;DD&#64;_&#64;HH&#64;&#64;mm&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>archive</p></td>
<td><p>Location of date specific archive</p></td>
<td><p>&#64;ARCHIVE_ROOT&#64;/&#64;YYYY&#64;/&#64;MM&#64;/&#64;DD&#64;/&#64;HH&#64;/</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>bddir</p></td>
<td><p>Location of input boundaries</p></td>
<td><p>/scratch/sism/DEOL/&#64;YYYY&#64;/&#64;MM&#64;/&#64;DD&#64;/&#64;HH&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>intp_bddir</p></td>
<td><p>Location of boundaries on the current domain, i.e. the output directory of e927</p></td>
<td><p>&#64;WRK&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>bdfile_template</p></td>
<td><p>Name template for input boundary files</p></td>
<td><p>PFIFSDEOL+&#64;LLLL&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>bddir_sfx</p></td>
<td><p>Location of input intial file for surfex</p></td>
<td><p>/home/snh02/work/dev-CY46h1_deode/boundaries/HRES/&#64;YYYY&#64;/&#64;MM&#64;/&#64;DD&#64;/&#64;HH&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>bdfile_sfx_template</p></td>
<td><p>Name template for input initial surfex file for prep</p></td>
<td><p>fc&#64;YYYY&#64;&#64;MM&#64;&#64;DD&#64;_&#64;HH&#64;+&#64;LLL&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>climdir</p></td>
<td><p>Location of generated/used climate files (PGD/monthly files)</p></td>
<td><p>&#64;SCRATCH&#64;/deode/&#64;CASE&#64;/climate/&#64;DOMAIN&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>bdclimdir</p></td>
<td><p>Location of host model climate files used for e927/c903</p></td>
<td><p>/home/snh02/work/dev-CY46h1_deode/climate/DEODE_LARGE</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>bindir</p></td>
<td><p>Location of binaries</p></td>
<td><p>/home/snh02/work/dev-CY46h1_deode/bin/2023-03-29</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>fullpos_config_file</p></td>
<td><p>Path to the fullpos yml config file</p></td>
<td><p>&#64;DEODE_HOME&#64;/deode/namelist_generation_input/&#64;CYCLE&#64;/fullpos_namelist.yml</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
</tbody>
</table>
</section>
<section id="platform">
<h3>Platform<a class="headerlink" href="#platform" title="Permalink to this heading"></a></h3>
<p>DEODE platform specific path settings</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Options</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>deode_home</p></td>
<td><p>Path to the deode code, normally no need to change</p></td>
<td><p>set-by-the-system</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>scratch</p></td>
<td><p>Path used as macro for e.g. wrk and other directories.</p></td>
<td><p>/scratch/&#64;USER&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>archive_root</p></td>
<td><p>Path to the main archive directory</p></td>
<td><p>&#64;SCRATCH&#64;/deode/&#64;CASE&#64;/archive</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>static_data</p></td>
<td><p>Macro used in other platform paths</p></td>
<td><p>/hpcperm/snh02/DEODE</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>climdata</p></td>
<td><p>Macro used in other platform paths</p></td>
<td><p>&#64;STATIC_DATA&#64;/climate</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>rrtm_dir</p></td>
<td><p>Path to RRTM input data</p></td>
<td><p>&#64;STATIC_DATA&#64;/rrtm/&#64;CYCLE&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>ncdir</p></td>
<td><p>Path to ECrad NetCDF data</p></td>
<td><p>&#64;STATIC_DATA&#64;/ncdir</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>e923_data</p></td>
<td><p>Path to e923 input data</p></td>
<td><p>&#64;STATIC_DATA&#64;/climate/E923_DATA</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>namelists</p></td>
<td><p>Path to static namelists</p></td>
<td><p>&#64;DEODE_HOME&#64;/deode/data/namelists/&#64;CYCLE&#64;</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>ecosg_data_path</p></td>
<td><p>Path to ECOCLIMAP SG data</p></td>
<td><p>&#64;CLIMDATA&#64;/ECOCLIMAP-SG</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>ecoclim_data_path</p></td>
<td><p>Path to the ECOCLIMAP-II data</p></td>
<td><p>&#64;CLIMDATA&#64;/ecoclimap</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>gmted2010_data_path</p></td>
<td><p>Path to gmted2010 input</p></td>
<td><p>&#64;CLIMDATA&#64;/GMTED2010</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>soilgrid_data_path</p></td>
<td><p>Path to solgrid input data</p></td>
<td><p>&#64;CLIMDATA&#64;/SOILGRID</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>pgd_data_path</p></td>
<td><p>Path to PGD input data</p></td>
<td><p>&#64;CLIMDATA&#64;/PGD</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
</tbody>
</table>
</section>
<section id="troika">
<h3>Troika<a class="headerlink" href="#troika" title="Permalink to this heading"></a></h3>
<p>DEODE system specific path settings</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Options</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>config_file</p></td>
<td><p>Troika config file</p></td>
<td><p>&#64;DEODE_HOME&#64;/deode/data/config_files/troika.yml</p></td>
<td><p></p></td>
<td><p>string</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="adding-a-new-task">
<h2>Adding a New Task<a class="headerlink" href="#adding-a-new-task" title="Permalink to this heading"></a></h2>
<p>In order to start adding a new task to the deode prototype, a <em>file</em> containing your task needs to be created in the <code class="docutils literal notranslate"><span class="pre">$DEODE_PROTOTYPE/deode/tasks</span></code> folder, where <strong>$DEODE_PROTOTYPE</strong> points to the full name to the folder in which the deode prototype is installed.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">tasks</span></code> folder, the <code class="docutils literal notranslate"><span class="pre">discover_task.py</span></code> file looks for the task specified in the <code class="docutils literal notranslate"><span class="pre">deode</span> <span class="pre">run</span></code> command. The task name should be the name of the <strong>class</strong> of your task, as it’s in the class names that discover_task.py gets the tasks available. For ease of use, the <em>file</em> name containing your class can also be named the same as the class.</p>
<p>A created task <strong>class</strong> usually inherits the <strong>Task</strong> class from the <code class="docutils literal notranslate"><span class="pre">base.py</span></code> file inside the <code class="docutils literal notranslate"><span class="pre">tasks</span></code> folder The new tasks inherit the <strong>Task</strong> class, one can define their own <code class="docutils literal notranslate"><span class="pre">execute</span></code> , <code class="docutils literal notranslate"><span class="pre">prep</span></code> , <code class="docutils literal notranslate"><span class="pre">post</span></code>  and <code class="docutils literal notranslate"><span class="pre">run</span></code> functions and possibly define new ones.</p>
<p>Inside that [task.taskname] directive, the <em>wrapper</em> and <em>command</em> settings could be set to their appropriate values if they are used by the task. The <em>wrapper</em> setting sets a wrapper for the command needed to be run, most commonly commands <code class="docutils literal notranslate"><span class="pre">time</span></code> or <code class="docutils literal notranslate"><span class="pre">srun</span></code>. The <em>wrapper</em> setting comes from the <strong>BatchJob</strong> class included from <code class="docutils literal notranslate"><span class="pre">batch.py</span></code> inside <code class="docutils literal notranslate"><span class="pre">base.py</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wrapper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_task_setting</span><span class="p">(</span><span class="s2">&quot;wrapper&quot;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">batch</span> <span class="o">=</span> <span class="n">BatchJob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">,</span> <span class="n">wrapper</span><span class="p">)</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_task_setting</span><span class="p">(</span><span class="s2">&quot;command&quot;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">run</span></code> function of the <strong>BatchJob</strong> class unites these two settings before running them as one in our task.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrapper</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">cmd</span>
</pre></div>
</div>
<p>In order to copy files, inside the <code class="docutils literal notranslate"><span class="pre">task.py</span></code> file, the <code class="docutils literal notranslate"><span class="pre">fmanager</span></code> directive from the <code class="docutils literal notranslate"><span class="pre">deode/toolbox.py</span></code> file needs to be used. To create the input for the task, the <code class="docutils literal notranslate"><span class="pre">fmanager.input</span></code> function needs to be called.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">input</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">target</span><span class="p">,</span>
    <span class="n">destination</span><span class="p">,</span>
    <span class="n">basetime</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">validtime</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="c1"># noqa</span>
    <span class="n">check_archive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">provider_id</span><span class="o">=</span><span class="s2">&quot;symlink&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">fmanager.input</span></code> only has two non-optional arguments and providers for <em>symlink, copy</em>, <em>move</em> and <em>ECFS</em>.
The paths used with <code class="docutils literal notranslate"><span class="pre">fmanager</span></code> should be put into macros and not hardcoded.
To link for example MASTERODB, one needs to call the function the following way:
<code class="docutils literal notranslate"><span class="pre">self.fmanager.input(&quot;&#64;BINDIR&#64;/MASTERODB&quot;,</span> <span class="pre">&quot;MASTERODB&quot;)</span></code>
To copy or move, one only needs to add a provider_id:
<code class="docutils literal notranslate"><span class="pre">self.fmanager.input(&quot;&#64;BINDIR&#64;/MASTERODB&quot;,</span> <span class="pre">&quot;MASTERODB&quot;,</span> <span class="pre">provider_id=&quot;copy&quot;)</span></code></p>
<p>To handle output data, the <code class="docutils literal notranslate"><span class="pre">fmanager.output</span></code> function needs to be called after the running of the code in a similar way as the input. Example:
<code class="docutils literal notranslate"><span class="pre">self.fmanager.output(&quot;ICMSH&#64;CNMEXP&#64;+000?&quot;,</span> <span class="pre">&quot;&#64;OUTDIR&#64;/ICMSH&#64;CNMEXP&#64;+000?&quot;)</span></code>. The same providers are available for output as for input.</p>
<p>In order to setup submission options, they need to be added to the <code class="docutils literal notranslate"><span class="pre">config.toml</span></code> file needs. One can either add to an already existing submit type, like the default <code class="docutils literal notranslate"><span class="pre">serial</span></code>, or create their own submission type. To add SLURM options, a name of the option along with the option itself needs to be added inside the <code class="docutils literal notranslate"><span class="pre">submission.submissiontype.BATCH</span></code> directive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">submission</span><span class="o">.</span><span class="n">parallel</span><span class="o">.</span><span class="n">BATCH</span><span class="p">]</span>
<span class="n">WALLTIME</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH --time=00:11:00&quot;</span>
<span class="n">QOS</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH --qos=np&quot;</span>
<span class="n">NTASKS</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH --ntasks=128&quot;</span>
<span class="n">CORES</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH --cpus-per-task=4&quot;</span>
<span class="n">MULTITHREAD</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH --hint=nomultithread&quot;</span>
<span class="n">NODES</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH -N 4&quot;</span>
<span class="n">NAME</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH --job-name=fcast_task&quot;</span>
<span class="n">ACCOUNT</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH -A msdeode&quot;</span>

</pre></div>
</div>
<p>To add environment variables, run modules or arbitrary commands, they need to be added to the <code class="docutils literal notranslate"><span class="pre">submission.submissiontype.ENV</span></code> directive</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">submission</span><span class="o">.</span><span class="n">parallel</span><span class="o">.</span><span class="n">ENV</span><span class="p">]</span>
<span class="n">MODULE</span> <span class="o">=</span> <span class="s2">&quot;print(&#39;My beautiful module&#39;)&quot;</span>
<span class="n">OS</span> <span class="o">=</span> <span class="s2">&quot;import os&quot;</span>
</pre></div>
</div>
<p>One can also specify these in a task.exceptions directive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">submission</span><span class="o">.</span><span class="n">task_exceptions</span><span class="o">.</span><span class="n">Newtask</span><span class="o">.</span><span class="n">BATCH</span><span class="p">]</span>
<span class="n">WALLTIME</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH --time=00:11:00&quot;</span>
<span class="n">QOS</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH --qos=np&quot;</span>
<span class="n">NTASKS</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH --ntasks=128&quot;</span>
<span class="n">CORES</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH --cpus-per-task=4&quot;</span>
<span class="n">MULTITHREAD</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH --hint=nomultithread&quot;</span>
<span class="n">NODES</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH -N 4&quot;</span>
<span class="n">NAME</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH --job-name=fcast_task&quot;</span>
<span class="n">ACCOUNT</span> <span class="o">=</span> <span class="s2">&quot;#SBATCH -A msdeode&quot;</span>

<span class="p">[</span><span class="n">submission</span><span class="o">.</span><span class="n">task_exceptions</span><span class="o">.</span><span class="n">Newtask</span><span class="o">.</span><span class="n">ENV</span><span class="p">]</span>
<span class="n">MODULE</span> <span class="o">=</span> <span class="s2">&quot;print(&#39;My beautiful module&#39;)&quot;</span>
<span class="n">OS</span> <span class="o">=</span> <span class="s2">&quot;import os&quot;</span>
</pre></div>
</div>
<p>After that is all done, the new task can be ran with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>deode -config_file=/your/config.toml -loglevel debug run --task yourtask  --template $PWD/deode/templates/stand_alone.py  --job $PWD/yourtask.job  --troika_config $PWD/config.yml  -o $PWD/yourtask.log
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">config_file</span></code> is specified under <code class="docutils literal notranslate"><span class="pre">[troika]</span></code> in config.yml, one can skip the –troika_config argument.</p>
</section>
<section id="namelist-handling-in-deode">
<h2>Namelist handling in deode<a class="headerlink" href="#namelist-handling-in-deode" title="Permalink to this heading"></a></h2>
<p>Describes the namelist handling in the Deode-Prototype.</p>
<section id="internal-usage">
<h3>Internal usage<a class="headerlink" href="#internal-usage" title="Permalink to this heading"></a></h3>
<p>The deode namelists are stored as yml files and assembled following a set of rules.</p>
</section>
<section id="get-a-specific-namelist-from-command-line">
<h3>Get a specific namelist from command line<a class="headerlink" href="#get-a-specific-namelist-from-command-line" title="Permalink to this heading"></a></h3>
<p>For a given configuration file any namelist generated by the system can be extracted from command line using e.g. for the forecast</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">deode</span> <span class="n">show</span> <span class="n">namelist</span> <span class="o">-</span><span class="n">t</span> <span class="n">master</span> <span class="o">-</span><span class="n">n</span> <span class="n">forecast</span>
</pre></div>
</div>
<p>If you are uncertain about the name of the namelist you’re searching for just type any name to get a list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">deode</span> <span class="n">show</span> <span class="n">namelist</span> <span class="o">-</span><span class="n">t</span> <span class="n">master</span> <span class="o">-</span><span class="n">n</span> <span class="n">showme</span>
</pre></div>
</div>
<p>If you’d like have the namelist without the substituted values from the config file add a <code class="docutils literal notranslate"><span class="pre">-b</span></code> to the command. For more information about namelist extraction use the help command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">deode</span> <span class="n">show</span> <span class="n">namelist</span> <span class="o">-</span><span class="n">h</span>
</pre></div>
</div>
</section>
<section id="add-your-own-namelist">
<h3>Add your own namelist<a class="headerlink" href="#add-your-own-namelist" title="Permalink to this heading"></a></h3>
<p>The simplest way to change a namelist is to extract it as described above, make your modifications and add the namelist to the directory specified by <code class="docutils literal notranslate"><span class="pre">platform.namelist</span> <span class="pre">in</span></code> the config file. The name of the namelist should be the same as when extracted above. Before the system will pick up your namelist you have to set <code class="docutils literal notranslate"><span class="pre">general.accept_stat_namelist</span> <span class="pre">=</span> <span class="pre">true</span></code> in the config file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</section>
</section>
<section id="configure-selection-of-fields-from-fullpos">
<h2>Configure selection of fields from fullpos<a class="headerlink" href="#configure-selection-of-fields-from-fullpos" title="Permalink to this heading"></a></h2>
<p>Describes how to select fields and output settings for fullpos. The scripting allows to select fields and levels without having to worry about how the namelist should be constructed, this is done by the system.</p>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h3>
<p>The fullpos output is controlled by the following settings</p>
<ul class="simple">
<li><p>Output interval is set by <code class="docutils literal notranslate"><span class="pre">output_settings.fullpos</span></code> in the general section of the main config file. The interval is specified using the duration syntax and can be give down to a resolution of minutes.</p></li>
<li><p>Field selection and settings for different output times is done in <code class="docutils literal notranslate"><span class="pre">deode/namelist_generation/fullpos_namelist.yaml</span></code></p></li>
</ul>
<p>Currently it’s only implemented support for a single domain using the native geometry of the domain used for the model run.</p>
</section>
<section id="the-fullpos-config-file">
<h3>The fullpos config file<a class="headerlink" href="#the-fullpos-config-file" title="Permalink to this heading"></a></h3>
<p>The config file <code class="docutils literal notranslate"><span class="pre">deode/namelist_generation/fullpos_namelist.yaml</span></code> consists of four main parts</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NAMFPC</span></code> where we specify the non-field related settings</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">selection</span></code> where all fields and levels are specified per output type as defined by fullpos</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LEVEL_MAP</span></code> and <code class="docutils literal notranslate"><span class="pre">PARAM_MAP</span></code> tells how settings in the selection part should be translated to settings in <code class="docutils literal notranslate"><span class="pre">NAMFPC</span></code>. Normally this does not have to be changed.</p></li>
</ul>
<p>The settings done in the <code class="docutils literal notranslate"><span class="pre">selection</span></code> part will be used to fill <code class="docutils literal notranslate"><span class="pre">NAMFPC</span></code> and the correct level numbers will be filled in the final namelist.</p>
<section id="namfpc-settings">
<h4>NAMFPC settings<a class="headerlink" href="#namfpc-settings" title="Permalink to this heading"></a></h4>
<p>In the section we can add general fullpos settings as in the example below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NAMFPC</span><span class="p">:</span>
    <span class="n">NFPGRIB</span><span class="p">:</span> <span class="mi">141</span>
    <span class="n">CFPDOM</span><span class="p">:</span> <span class="s2">&quot;$</span><span class="si">{domain.name}</span><span class="s2">&quot;</span>
    <span class="n">LFPCAPEX</span><span class="p">:</span> <span class="kc">True</span>
    <span class="n">LFPMOIS</span><span class="p">:</span> <span class="kc">False</span>
    <span class="n">L_READ_MODEL_DATE</span><span class="p">:</span> <span class="kc">True</span>
    <span class="n">NFPCAPE</span><span class="p">:</span> <span class="mi">5</span>
</pre></div>
</div>
</section>
<section id="selection">
<h4>Selection<a class="headerlink" href="#selection" title="Permalink to this heading"></a></h4>
<p>In the selection section we specify all fields to be produced by fullpos. Following the time selection logics we define the subsection as an arbitrary number of <code class="docutils literal notranslate"><span class="pre">xxtddddhhmm</span></code> choices. The default setup contains a general selection and on for t=0, i.e. <code class="docutils literal notranslate"><span class="pre">xxt00000000</span></code>.</p>
<p>The logics follows the namelists used by fullpos. For 2D fields we specify the field names in the appropriate sections. For 3D fields there are two ways. We can specify the fields directly as in here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">NAMFPDYH</span><span class="p">:</span>
   <span class="n">CL3DF</span><span class="p">:</span>
     <span class="o">-</span> <span class="s1">&#39;CLOUD_FRACTI&#39;</span>
     <span class="o">-</span> <span class="s1">&#39;GRAUPEL&#39;</span>
   <span class="n">RFP3H</span><span class="p">:</span>
     <span class="o">-</span> <span class="mf">20.0</span>
     <span class="o">-</span> <span class="mf">50.0</span>
</pre></div>
</div>
<p>If there is a wish for different levels for different fields we can specify this as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">NAMFPDYP</span><span class="p">:</span>
   <span class="n">VOR</span><span class="p">:</span>
    <span class="n">CL3DF</span><span class="p">:</span>
     <span class="o">-</span> <span class="s1">&#39;ABS_VORTICITY&#39;</span>
    <span class="n">RFP3P</span><span class="p">:</span>
     <span class="o">-</span> <span class="mf">5000.0</span>
     <span class="o">-</span> <span class="mf">10000.0</span>
   <span class="n">DIV</span><span class="p">:</span>
    <span class="n">CL3DF</span><span class="p">:</span>
     <span class="o">-</span> <span class="s1">&#39;DIVERGENCE&#39;</span>
    <span class="n">RFP3P</span><span class="p">:</span>
     <span class="o">-</span> <span class="mf">70000.0</span>
     <span class="o">-</span> <span class="mf">80000.0</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">VOR</span></code> and <code class="docutils literal notranslate"><span class="pre">DIV</span></code> in the example above are just arbitrary names used to separate the different choices.</p>
</section>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this heading"></a></h3>
<p>A simple example on how the namelists are generated can be found at the end of <code class="docutils literal notranslate"><span class="pre">deode/fullpos.py</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fullpos</span>

<span class="n">fp</span> <span class="o">=</span> <span class="n">Fullpos</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">)</span>

<span class="n">namfpc</span><span class="p">,</span> <span class="n">selections</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">construct</span><span class="p">()</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">namfpc</span><span class="p">[</span><span class="s2">&quot;NAMFPC&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">selections</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">kk</span><span class="p">,</span> <span class="n">vv</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">kk</span><span class="p">,</span> <span class="n">vv</span><span class="p">)</span>
</pre></div>
</div>
<p>The fullpos namelists can be generated from command line using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">deode</span> <span class="o">-</span><span class="n">config_file</span> <span class="n">deode</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">config_files</span><span class="o">/</span><span class="n">config</span><span class="o">.</span><span class="n">toml</span> <span class="n">show</span> <span class="n">namelist</span> <span class="o">-</span><span class="n">t</span> <span class="n">master</span> <span class="o">-</span><span class="n">n</span> <span class="n">forecast</span>
</pre></div>
</div>
<p>This will produce the namelist for the forecast and as many xxt* files as has been defined in the fullpos yaml file.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="deode.html" class="btn btn-neutral float-left" title="deode package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The WP5.1 dev group in the DE_330 project.
      <span class="lastupdated">Last updated on Jun 21, 2023.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>